<script setup>

import { latLng } from "leaflet";


</script>


<template>

    <div style="height: 100%; width: 100%">
     
      <l-map
        :zoom="zoom"
        :center="center"
        :options="mapOptions"
        style="height: 100%"
        @update:center="centerUpdate"
        @update:zoom="zoomUpdate"
      >
        <l-tile-layer
          :url="url"
        />
        <l-circle v-for="building, index in samp_dat" :key="index"
        :lat-lng="latLng(building.latitude, building.longitude)"
        :radius="currentZoom < 12 ? building.energyUsage/30 : 50"
        :color="`rgb(${255*(building.energyUsage/150000)},0,${255 - 255*(building.energyUsage/150000)})`"
        
        >


       <l-popup>
            <div @click="innerClick">
              {{building.buildingName}}
              {{ currentZoom }}

            </div>
          </l-popup>
        </l-circle>

      </l-map>
    </div>
  </template>
  
  <script>
    import "leaflet/dist/leaflet.css";
  import { LMap, LTileLayer, LMarker, LPopup, LTooltip, LCircle} from "@vue-leaflet/vue-leaflet";
  126511
import { onMounted, ref } from 'vue';
const samp_dat = [{"bbl":10,"boroughNumber":1,"buildingName":"100 Gold St","buildingAddress":"100 Gold St ","borough":"Manhattan","state":"New York","postcode":10038,"block":94,"lot":25,"energyUsage":64582,"latitude":40.710353,"longitude":-74.004007,"communityBoard":1,"councilDistrict":1,"censusTract":1501,"bin":1001289,"nta":"Battery Park City-Lower Manhattan                                          "},{"bbl":1000940025,"boroughNumber":1,"buildingName":"100 Gold St","buildingAddress":"100 Gold St ","borough":"Manhattan","state":"New York","postcode":10038,"block":94,"lot":25,"energyUsage":64582,"latitude":40.710353,"longitude":-74.004007,"communityBoard":1,"councilDistrict":1,"censusTract":1501,"bin":1001289,"nta":"Battery Park City-Lower Manhattan                                          "},{"bbl":1001210001,"boroughNumber":1,"buildingName":"Manhattan Municipal Building","buildingAddress":"1 Centre St ","borough":"Manhattan","state":"New York","postcode":10007,"block":121,"lot":1,"energyUsage":92117,"latitude":40.713001,"longitude":-74.004181,"communityBoard":1,"councilDistrict":1,"censusTract":29,"bin":1001394,"nta":"Chinatown                                                                  "},{"bbl":1001220001,"boroughNumber":1,"buildingName":"Tweed Courthouse (DOE Offices)","buildingAddress":"52 Chambers St ","borough":"Manhattan","state":"New York","postcode":10007,"block":122,"lot":1,"energyUsage":15308,"latitude":40.713814,"longitude":-74.005570,"communityBoard":1,"councilDistrict":1,"censusTract":31,"bin":1079146,"nta":"SoHo-TriBeCa-Civic Center-Little Italy                                     "},{"bbl":1001347501,"boroughNumber":1,"buildingName":"Home Life Building","buildingAddress":"253 Broadway ","borough":"Manhattan","state":"New York","postcode":10007,"block":134,"lot":7501,"energyUsage":19284,"latitude":40.713265,"longitude":-74.007063,"communityBoard":1,"councilDistrict":1,"censusTract":21,"bin":1082757,"nta":"SoHo-TriBeCa-Civic Center-Little Italy                                     "},{"bbl":1001530001,"boroughNumber":1,"buildingName":"Sun Building","buildingAddress":"280 Broadway ","borough":"Manhattan","state":"New York","postcode":10007,"block":153,"lot":1,"energyUsage":16423,"latitude":40.714417,"longitude":-74.006089,"communityBoard":1,"councilDistrict":1,"censusTract":31,"bin":1079215,"nta":"SoHo-TriBeCa-Civic Center-Little Italy                                     "},{"bbl":1001530018,"boroughNumber":1,"buildingName":"Emigrant Savings Building","buildingAddress":"49-51 Chambers St ","borough":"Manhattan","state":"New York","postcode":10007,"block":153,"lot":18,"energyUsage":19933,"latitude":40.713767,"longitude":-74.005429,"communityBoard":1,"councilDistrict":1,"censusTract":31,"bin":1079216,"nta":"SoHo-TriBeCa-Civic Center-Little Italy                                     "},{"bbl":1001530024,"boroughNumber":1,"buildingName":"Manhattan Surrogate's Court","buildingAddress":"31 Chambers St ","borough":"Manhattan","state":"New York","postcode":10007,"block":153,"lot":24,"energyUsage":15059,"latitude":40.713402,"longitude":-74.004635,"communityBoard":1,"councilDistrict":1,"censusTract":31,"bin":1001670,"nta":"SoHo-TriBeCa-Civic Center-Little Italy                                     "},{"bbl":1001540023,"boroughNumber":1,"buildingName":"City Planning Building","buildingAddress":"22 Reade St ","borough":"Manhattan","state":"New York","postcode":10007,"block":154,"lot":23,"energyUsage":8951,"latitude":40.714231,"longitude":-74.004895,"communityBoard":1,"councilDistrict":1,"censusTract":31,"bin":1078613,"nta":"SoHo-TriBeCa-Civic Center-Little Italy                                     "},{"bbl":1001550001,"boroughNumber":1,"buildingName":"Court Square Building","buildingAddress":"2 Lafayette St ","borough":"Manhattan","state":"New York","postcode":10007,"block":155,"lot":1,"energyUsage":29227,"latitude":40.713723,"longitude":-74.003586,"communityBoard":1,"councilDistrict":1,"censusTract":31,"bin":1001672,"nta":"SoHo-TriBeCa-Civic Center-Little Italy                                     "},{"bbl":1001600021,"boroughNumber":1,"buildingName":"Manhattan Supreme Court","buildingAddress":"60 Centre St ","borough":"Manhattan","state":"New York","postcode":10007,"block":160,"lot":21,"energyUsage":36789,"latitude":40.714467,"longitude":-74.002503,"communityBoard":1,"councilDistrict":1,"censusTract":29,"bin":1085748,"nta":"Chinatown                                                                  "},{"bbl":1001660027,"boroughNumber":1,"buildingName":"Louis J. Lefkowitz Building","buildingAddress":"80 Centre St ","borough":"Manhattan","state":"New York","postcode":10013,"block":166,"lot":27,"energyUsage":39543,"latitude":40.715447,"longitude":-74.001890,"communityBoard":1,"councilDistrict":1,"censusTract":29,"bin":1001830,"nta":"Chinatown                                                                  "},{"bbl":1001670001,"boroughNumber":1,"buildingName":"Manhattan Criminal Court","buildingAddress":"100 Centre Street ","borough":"Manhattan","state":"New York","postcode":10013,"block":167,"lot":1,"energyUsage":126511,"latitude":40.716084,"longitude":-74.001425,"communityBoard":1,"councilDistrict":1,"censusTract":29,"bin":1079000,"nta":"Chinatown                                                                  "},{"bbl":1001680032,"boroughNumber":1,"buildingName":"Health Building","buildingAddress":"125 Worth St ","borough":"Manhattan","state":"New York","postcode":10013,"block":168,"lot":32,"energyUsage":33886,"latitude":40.715428,"longitude":-74.002673,"communityBoard":1,"councilDistrict":1,"censusTract":31,"bin":1001831,"nta":"SoHo-TriBeCa-Civic Center-Little Italy                                     "},{"bbl":1001690010,"boroughNumber":1,"buildingName":"Manhattan Civil Court","buildingAddress":"111 Centre St ","borough":"Manhattan","state":"New York","postcode":10013,"block":169,"lot":10,"energyUsage":27287,"latitude":40.716317,"longitude":-74.001277,"communityBoard":1,"councilDistrict":1,"censusTract":31,"bin":1001833,"nta":"SoHo-TriBeCa-Civic Center-Little Italy                                     "},{"bbl":1001700006,"boroughNumber":1,"buildingName":"Clocktower Building","buildingAddress":"346 Broadway ","borough":"Manhattan","state":"New York","postcode":10013,"block":170,"lot":6,"energyUsage":26710,"latitude":40.716696,"longitude":-74.004163,"communityBoard":1,"councilDistrict":1,"censusTract":31,"bin":1001835,"nta":"SoHo-TriBeCa-Civic Center-Little Italy                                     "},{"bbl":1001710031,"boroughNumber":1,"buildingName":"Manhattan Family Court","buildingAddress":"60 Lafayette St ","borough":"Manhattan","state":"New York","postcode":10013,"block":171,"lot":31,"energyUsage":31366,"latitude":40.716460,"longitude":-74.002327,"communityBoard":1,"councilDistrict":1,"censusTract":31,"bin":1001842,"nta":"SoHo-TriBeCa-Civic Center-Little Italy                                     "},{"bbl":1001970017,"boroughNumber":1,"buildingName":"Excelsior Building","buildingAddress":"137 Centre St ","borough":"Manhattan","state":"New York","postcode":10013,"block":197,"lot":17,"energyUsage":5677,"latitude":40.717157,"longitude":-74.000653,"communityBoard":1,"councilDistrict":1,"censusTract":31,"bin":1002358,"nta":"SoHo-TriBeCa-Civic Center-Little Italy                                     "},{"bbl":1004230022,"boroughNumber":1,"buildingName":"115 Chrystie","buildingAddress":"115 Chrystie Street","borough":"Manhattan","state":"New York","postcode":10002,"block":423,"lot":22,"energyUsage":1974,"latitude":40.718647,"longitude":-73.993586,"communityBoard":3,"councilDistrict":1,"censusTract":18,"bin":1005645,"nta":"Chinatown                                                                  "},{"bbl":1010440022,"boroughNumber":1,"buildingName":"Midtown Community Court","buildingAddress":"314 West 54th St ","borough":"Manhattan","state":"New York","postcode":10019,"block":1044,"lot":22,"energyUsage":3086,"latitude":40.765082,"longitude":-73.984997,"communityBoard":4,"councilDistrict":3,"censusTract":133,"bin":1025397,"nta":"Clinton                                                                    "},{"bbl":1017690045,"boroughNumber":1,"buildingName":"Harlem Courthouse","buildingAddress":"170 East 121st St ","borough":"Manhattan","state":"New York","postcode":10035,"block":179,"lot":45,"energyUsage":1265,"latitude":40.801423,"longitude":-73.938373,"communityBoard":11,"councilDistrict":8,"censusTract":196,"bin":1054382,"nta":"East Harlem North                                                          "},{"bbl":2024440001,"boroughNumber":2,"buildingName":"Hall of Justice","buildingAddress":"265 East 161st St  ","borough":"Bronx","state":"New York","postcode":10451,"block":2454,"lot":1,"energyUsage":62113,"latitude":40.825928,"longitude":-73.919514,"communityBoard":4,"councilDistrict":16,"censusTract":18302,"bin":2097114,"nta":"East Concourse-Concourse Village                                           "},{"bbl":2024620039,"boroughNumber":2,"buildingName":"Bronx Housing Court","buildingAddress":"1118 Grand Concourse ","borough":"Bronx","state":"New York","postcode":10456,"block":2462,"lot":39,"energyUsage":9119,"latitude":40.832232,"longitude":-73.919655,"communityBoard":4,"councilDistrict":16,"censusTract":18102,"bin":2101266,"nta":"East Concourse-Concourse Village                                           "},{"bbl":2024680001,"boroughNumber":2,"buildingName":"Bronx County Courthouse","buildingAddress":"851 Grand Concourse ","borough":"Bronx","state":"New York","postcode":10451,"block":2468,"lot":1,"energyUsage":15804,"latitude":40.825999,"longitude":-73.923131,"communityBoard":4,"councilDistrict":8,"censusTract":63,"bin":2002869,"nta":"West Concourse                                                             "},{"bbl":2029470018,"boroughNumber":2,"buildingName":"Bronx Bergen Building","buildingAddress":"1932 Arthur Ave ","borough":"Bronx","state":"New York","postcode":10457,"block":2947,"lot":18,"energyUsage":13866,"latitude":40.845685,"longitude":-73.893294,"communityBoard":6,"councilDistrict":17,"censusTract":36901,"bin":2009911,"nta":"East Tremont                                                               "},{"bbl":2048320009,"boroughNumber":2,"buildingName":"Bronx Neighborhood Building","buildingAddress":"4101 White Plains Rd ","borough":"Bronx","state":"New York","postcode":10466,"block":4832,"lot":9,"energyUsage":1716,"latitude":40.890740,"longitude":-73.858862,"communityBoard":12,"councilDistrict":12,"censusTract":420,"bin":2063174,"nta":"Williamsbridge-Olinville                                                   "},{"bbl":3000850006,"boroughNumber":3,"buildingName":"OEM Building","buildingAddress":"165 Cadman Plaza East","borough":"Brooklyn","state":"New York","postcode":11201,"block":85,"lot":6,"energyUsage":12260,"latitude":40.698767,"longitude":-73.989870,"communityBoard":2,"councilDistrict":33,"censusTract":13,"bin":3000172,"nta":"DUMBO-Vinegar Hill-Downtown Brooklyn-Boerum Hill                           "},{"bbl":3001390001,"boroughNumber":3,"buildingName":"Brooklyn Borough Hall","buildingAddress":"209 Joralemon St ","borough":"Brooklyn","state":"New York","postcode":11201,"block":139,"lot":1,"energyUsage":1809,"latitude":40.692476,"longitude":-73.990487,"communityBoard":2,"councilDistrict":33,"censusTract":11,"bin":3000256,"nta":"DUMBO-Vinegar Hill-Downtown Brooklyn-Boerum Hill                           "},{"bbl":3001390020,"boroughNumber":3,"buildingName":"Brooklyn Supreme Court","buildingAddress":"360 Adams St ","borough":"Brooklyn","state":"New York","postcode":11201,"block":139,"lot":20,"energyUsage":47357,"latitude":40.694122,"longitude":-73.988904,"communityBoard":2,"councilDistrict":33,"censusTract":11,"bin":3000257,"nta":"DUMBO-Vinegar Hill-Downtown Brooklyn-Boerum Hill                           "},{"bbl":3001407502,"boroughNumber":3,"buildingName":"Brooklyn Supreme & Family Court","buildingAddress":"330 Jay St ","borough":"Brooklyn","state":"New York","postcode":11201,"block":140,"lot":7502,"energyUsage":37811,"latitude":40.694495,"longitude":-73.987198,"communityBoard":2,"councilDistrict":33,"censusTract":11,"bin":3347736,"nta":"DUMBO-Vinegar Hill-Downtown Brooklyn-Boerum Hill                           "},{"bbl":3001407503,"boroughNumber":3,"buildingName":"DOF Facility","buildingAddress":"345 Adams St ","borough":"Brooklyn","state":"New York","postcode":11201,"block":140,"lot":7503,"energyUsage":11943,"latitude":40.693400,"longitude":-73.988915,"communityBoard":2,"councilDistrict":33,"censusTract":11,"bin":3392969,"nta":"DUMBO-Vinegar Hill-Downtown Brooklyn-Boerum Hill                           "},{"bbl":3001690017,"boroughNumber":3,"buildingName":"Brooklyn Criminal Court","buildingAddress":"120 Schermerhorn St ","borough":"Brooklyn","state":"New York","postcode":11201,"block":169,"lot":17,"energyUsage":104757,"latitude":40.690074,"longitude":-73.988923,"communityBoard":2,"councilDistrict":33,"censusTract":43,"bin":3000534,"nta":"DUMBO-Vinegar Hill-Downtown Brooklyn-Boerum Hill                           "},{"bbl":3002370001,"boroughNumber":3,"buildingName":"Brooklyn Appellate Court","buildingAddress":"45 Monroe Pl ","borough":"Brooklyn","state":"New York","postcode":11201,"block":237,"lot":1,"energyUsage":2419,"latitude":40.695822,"longitude":-73.992802,"communityBoard":2,"councilDistrict":33,"censusTract":502,"bin":3001881,"nta":"Brooklyn Heights-Cobble Hill                                               "},{"bbl":3012740001,"boroughNumber":3,"buildingName":"Bedford Ave Armory","buildingAddress":"1579 Bedford Ave ","borough":"Brooklyn","state":"New York","postcode":11225,"block":1274,"lot":1,"energyUsage":5871,"latitude":40.668489,"longitude":-73.955849,"communityBoard":9,"councilDistrict":35,"censusTract":323,"bin":3033161,"nta":"Crown Heights South                                                        "},{"bbl":3024670001,"boroughNumber":3,"buildingName":"Division of Facilities Management and Construction Shops","buildingAddress":"390 Kent Ave ","borough":"Brooklyn","state":"New York","postcode":11211,"block":2467,"lot":1,"energyUsage":2168,"latitude":40.711246,"longitude":-73.968348,"communityBoard":1,"councilDistrict":33,"censusTract":549,"bin":3063635,"nta":"North Side-South Side                                                      "},{"bbl":4000830001,"boroughNumber":4,"buildingName":"Long Island City Courthouse","buildingAddress":"25-10 Court Sq ","borough":"Queens","state":"New York","postcode":11101,"block":83,"lot":1,"energyUsage":7227,"latitude":40.746059,"longitude":-73.943466,"communityBoard":2,"councilDistrict":26,"censusTract":19,"bin":4000698,"nta":"Hunters Point-Sunnyside-West Maspeth                                       "},{"bbl":4022740002,"boroughNumber":4,"buildingName":"Queens Borough Hall","buildingAddress":"120-55 Queens Blvd ","borough":"Queens","state":"New York","postcode":11415,"block":2274,"lot":2,"energyUsage":53873,"latitude":40.713329,"longitude":-73.828601,"communityBoard":9,"councilDistrict":29,"censusTract":216,"bin":4052812,"nta":"Kew Gardens                                                                "},{"bbl":4036050001,"boroughNumber":4,"buildingName":"Central Storehouse","buildingAddress":"66-26 Metropolitan Ave ","borough":"Queens","state":"New York","postcode":11379,"block":3605,"lot":1,"energyUsage":31689,"latitude":40.712372,"longitude":-73.892028,"communityBoard":5,"councilDistrict":30,"censusTract":61301,"bin":4443103,"nta":"Ridgewood                                                                  "},{"bbl":4096530001,"boroughNumber":4,"buildingName":"Queens Criminal Court","buildingAddress":"125-01 Queens Blvd ","borough":"Queens","state":"New York","postcode":11415,"block":9653,"lot":1,"energyUsage":37895,"latitude":40.712357,"longitude":-73.826292,"communityBoard":9,"councilDistrict":29,"censusTract":216,"bin":4206522,"nta":"Kew Gardens                                                                "},{"bbl":4096800001,"boroughNumber":4,"buildingName":"Queens Civil Court","buildingAddress":"89-17 Sutphin Blvd ","borough":"Queens","state":"New York","postcode":11435,"block":9680,"lot":1,"energyUsage":16928,"latitude":40.703617,"longitude":-73.808685,"communityBoard":12,"councilDistrict":24,"censusTract":240,"bin":4448759,"nta":"Jamaica                                                                    "},{"bbl":4096910001,"boroughNumber":4,"buildingName":"Queens Supreme Court","buildingAddress":"88-11 Sutphin Blvd ","borough":"Queens","state":"New York","postcode":11435,"block":9691,"lot":1,"energyUsage":23888,"latitude":40.704623,"longitude":-73.809151,"communityBoard":12,"councilDistrict":24,"censusTract":238,"bin":4207071,"nta":"Jamaica                                                                    "},{"bbl":4100930001,"boroughNumber":4,"buildingName":"Queens Family Court","buildingAddress":"152-02 Jamaica Ave ","borough":"Queens","state":"New York","postcode":11432,"block":10093,"lot":1,"energyUsage":34390,"latitude":40.702455,"longitude":-73.803261,"communityBoard":12,"councilDistrict":27,"censusTract":240,"bin":4438731,"nta":"Jamaica                                                                    "},{"bbl":5000060021,"boroughNumber":5,"buildingName":"Staten Island Courthouse","buildingAddress":"26 Central Ave ","borough":"Staten Island","state":"New York","postcode":10301,"block":6,"lot":21,"energyUsage":11072,"latitude":40.641120,"longitude":-74.076847,"communityBoard":1,"councilDistrict":49,"censusTract":3,"bin":5151735,"nta":"West New Brighton-New Brighton-St. George                                  "},{"bbl":5000070001,"boroughNumber":5,"buildingName":"Staten Island Borough Hall","buildingAddress":"10 Richmond Ter ","borough":"Staten Island","state":"New York","postcode":10301,"block":7,"lot":1,"energyUsage":11385,"latitude":40.642197,"longitude":-74.075201,"communityBoard":1,"councilDistrict":49,"censusTract":3,"bin":5000063,"nta":"West New Brighton-New Brighton-St. George                                  "},{"bbl":5000070012,"boroughNumber":5,"buildingName":"Staten Island Supreme Court","buildingAddress":"18 Richmond Ter ","borough":"Staten Island","state":"New York","postcode":10301,"block":7,"lot":12,"energyUsage":1913,"latitude":40.643004,"longitude":-74.075772,"communityBoard":1,"councilDistrict":49,"censusTract":3,"bin":5000064,"nta":"West New Brighton-New Brighton-St. George                                  "},{"bbl":5000080070,"boroughNumber":5,"buildingName":"Office Building","buildingAddress":"130 Stuyvesant Pl ","borough":"Staten Island","state":"New York","postcode":10301,"block":8,"lot":70,"energyUsage":20745,"latitude":40.642891,"longitude":-74.076874,"communityBoard":1,"councilDistrict":49,"censusTract":3,"bin":5000085,"nta":"West New Brighton-New Brighton-St. George                                  "},{"bbl":5000090022,"boroughNumber":5,"buildingName":"Staten Island Family Court","buildingAddress":"100 Richmond Ter ","borough":"Staten Island","state":"New York","postcode":10301,"block":9,"lot":22,"energyUsage":1429,"latitude":40.644935,"longitude":-74.077230,"communityBoard":1,"councilDistrict":49,"censusTract":7,"bin":5000090,"nta":"West New Brighton-New Brighton-St. George                                  "},{"bbl":5005230001,"boroughNumber":5,"buildingName":"Staten Island Village Hall","buildingAddress":"111 Canal St ","borough":"Staten Island","state":"New York","postcode":10304,"block":523,"lot":1,"energyUsage":932,"latitude":40.626584,"longitude":-74.076758,"communityBoard":1,"councilDistrict":49,"censusTract":21,"bin":5013729,"nta":"Stapleton-Rosebank                                                         "},{"bbl":5005420009,"boroughNumber":5,"buildingName":"Staten Island Criminal Court","buildingAddress":"67 Targee St ","borough":"Staten Island","state":"New York","postcode":10304,"block":542,"lot":9,"energyUsage":2516,"latitude":40.625509,"longitude":-74.083403,"communityBoard":1,"councilDistrict":49,"censusTract":21,"bin":5014078,"nta":"Stapleton-Rosebank                                                         "}]

  
  export default {
    name: "Example",
    components: {
      LMap,
      LTileLayer,
      LMarker,
      LPopup,
      LTooltip,
      LCircle
    }, 
    data() {
      return {
        zoom: 10,
        circle: {
        center: latLng(40.71284288886283, -74.00342815088115),
        radius: 10
      },
      samp_dat : samp_dat,
        center: latLng(40.71284288886283, -74.00342815088115),
        url: 'http://a.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png',
        withPopup: latLng(40.71284288886283, -74.00342815088115),
        currentZoom: 11.5,
        currentCenter: latLng(40.71284288886283, -74.00342815088115),
        showParagraph: false,
        mapOptions: {
          zoomSnap: 0.5
        },
        showMap: true
      };
    },
    methods: {
      zoomUpdate(zoom) {
        this.currentZoom = zoom;
      },
      centerUpdate(center) {
        this.currentCenter = center;
      },
      showLongText() {
        this.showParagraph = !this.showParagraph;
      },
      innerClick() {
        alert("Click!");
      }
    }
  };

    

  </script>
  